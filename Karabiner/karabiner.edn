 {
  :templates {
             :alfred "osascript -e 'tell application id \"com.runningwithcrayons.Alfred\" to run trigger \"%s\" in workflow \"%s\" with argument \"%s\"'"
             :km "osascript -e 'tell application \"Keyboard Maestro Engine\" to do script \"%s\"'"
             :open "open \"%s\""
             }

  :layers {
:caps-mode {:key :caps_lock :alone {:key :escape}}
:caps-command-mode {:key :caps_lock :alone {:key :left_command}}
  :tab-mode {:key :tab :alone {:key :tab}}
   }
   :simlayers {
  :q-mode {:key :q} ; mode for opening files and programs
   }
:applications {
                :spotify ["com.spotify.client"]
                :chrome ["com.google.Chrome"]
                :vscode ["com.microsoft.VSCode"]
                :cursor ["com.cursor.app"]
                }

  :main 

  [{:des "main profile"
    :rules [; some comment
            ;; [:left_command  :left_command nil  {:alone :!Cd}]
                ;;   [{:key :spacebar :modi :left_shift} [:spacebar :0 :spacebar]]
                  ; remap
            ]}
   {:des "capslock layer"
    :rules [; capslock layer is for navigation and copy/paste and insertions
            :caps-mode
            ; VIM MOVE COMMANDS WHEN CAPSLOCK IS PRESSED
            [:##j :##down_arrow]
            [:##h :##left_arrow] ; ## means you can press things together
            [:##k :##up_arrow]
            [:##l :##right_arrow]

            [:##a [:up_arrow :up_arrow :up_arrow :up_arrow :up_arrow]]
            [:##s [:down_arrow :down_arrow :down_arrow :down_arrow :down_arrow]]

            [:##spacebar :return_or_enter] ; space is enter
            [:##d [:!Cright_arrow :!Cdelete_or_backspace :delete_or_backspace]] ; go to end, delete line, then delete again
  

            ; Copy/paste/delete/undo commands
            [:##u :!Cz] ; undo
            [:##r :!Cz] ; undo
            [:##y :!Cc] ; copy

            [:##o :!Cv] ; paste
            [:##p :!CSv] ; paste from clipboard history
            [:##x :delete_or_backspace] ; delete character
            [:##i :!Odelete_or_backspace] ; delete word

            [:##b :!Oleft_arrow] ;  B to move back one word
            [:##w :!Oright_arrow] ;  W to move forward one word

            [:##e :!Cright_arrow] ;  E to move forward to end of line
            [:##q :!Cleft_arrow] ;  B to move back to start of line
            ; instert commands
            ; NUMBER KEYS ARE SHIFT + NUMBER
            [:1 :!Cleft_arrow]
            [:2 :!S2]
            [:3 :!S3]
            [:4 :!S4]
            [:5 :!S5]
            [:6 :!S6]
            [:7 :!S7]
            [:8 :!S8]
            [:9 :!S9]
            [:0 :!Cright_arrow]


            [:n :!O8] ; [
            [:period :!O9] ; ]
            [:m :!SO8] ; {
            [:comma :!SO9] ; }
            [:semicolon :!S8] ; (
           
            ]}
  {:des "tab layer"
    :rules [; for tabbing between windows and running commands
            :tab-mode
            ; RECTANGLE APP COMMANDS
            [:m :!OTreturn_or_enter] ; Rectangle maximize
            [:comma :!OTleft_arrow] ;left half
            [:period :!OTright_arrow] ; right half
            [:q :!OTd] ; Left third
            [:w :!OTf] ; Middle third
            [:e :!OTg] ; Right third
            [:r :!OTe] ; Right third
            [:t :!OTt] ; Right third

            [:i :!OSCr] ; add clipboard to inbox note
            [:o :!OSCt] ; run tomatobar.
            
            [:h :!O8] ; [
            [:l :!O9] ; [
            [:j :!SO8] ; {
            [:k :!SO9] ; }
            [:n :!S8] ; (
            [:m :!S9] ; (
            ]}
   {:des "system shortcuts"
    :rules [; System control shortcuts for keyboard lights, screen lock, etc.
            ; Keyboard backlight controls
            [:!TOSf5 :illumination_decrement] ; Ctrl+Opt+Shift+F5: Keyboard light down
            [:!TOSf6 :illumination_increment] ; Ctrl+Opt+Shift+F6: Keyboard light up

            ; Screen and power management
            [:!TOSl :!CQq] ; Ctrl+Opt+Shift+L: Lock screen (Cmd+Ctrl+Q)
            [:!TOSs ["pmset-sleep" {:shell "pmset displaysleepnow"}]] ; Ctrl+Opt+Shift+S: Display sleep

            ; Do Not Disturb toggle (macOS Ventura+)
            [:!TOSd :!CSdo_not_disturb] ; Ctrl+Opt+Shift+D: Toggle Do Not Disturb

            ; Mission Control and Desktop
            [:!TOSm :mission_control] ; Ctrl+Opt+Shift+M: Mission Control
            [:!TOSh :show_desktop] ; Ctrl+Opt+Shift+H: Show Desktop

            ; Screenshot shortcuts (alternative to default)
            [:!TOS3 :!CS3] ; Ctrl+Opt+Shift+3: Screenshot entire screen
            [:!TOS4 :!CS4] ; Ctrl+Opt+Shift+4: Screenshot selection
            [:!TOS5 :!CS5] ; Ctrl+Opt+Shift+5: Screenshot options

            ; Media controls
            [:!TOSp :play_or_pause] ; Ctrl+Opt+Shift+P: Play/Pause
            [:!TOSleft_bracket :rewind] ; Ctrl+Opt+Shift+[: Previous track
            [:!TOSright_bracket :fastforward] ; Ctrl+Opt+Shift+]: Next track

            ; Volume controls (fine-grained with Shift+Option)
            [:!SOup_arrow :volume_increment] ; Shift+Opt+Up: Volume up (small increment)
            [:!SOdown_arrow :volume_decrement] ; Shift+Opt+Down: Volume down (small increment)

            ; Brightness controls (fine-grained with Shift+Option)
            [:!SOright_arrow :display_brightness_increment] ; Shift+Opt+Right: Brightness up
            [:!SOleft_arrow :display_brightness_decrement] ; Shift+Opt+Left: Brightness down
            ]}
   {:des "qkey (apps)"
         :rules [:q-mode
              [:k [:km "open: Arc"]]
              [:j [:km "open: Cursor"]]
              [:l [:km "open: Warp"]]
              [:f [:km "open: Finder"]]
              [:s [:km "open: Spotify"]]
              [:n [:km "open: Obsidian"]]
              [:r [:km "open: ChatGPT"]]
              [:m [:km "open: Message"]]
              [:e [:km "open: Teams"]]
              [:w [:km "open: Slack"]]
            ]}
    {:des "right command key" ; right command key for app specific commands
:rules [
      [:right_command :!Cl :spotify]
      [:right_command :!Cl :chrome]
      [:right_command :!Cp :vscode]

      ]
}
   {:des "Quit application by command + Q only when pressing twice"
         :rules [[:!Cq
                  [:!Cq ["command-q" 0]]
                  ["command-q" 1]]
                 [:!Cq
                  ["command-q" 1]
                  nil
                  {:delayed {:invoked ["command-q" 0] :canceled ["command-q" 0]}}]]}
  ]
  }
;; :key | means key
;; !  | means mandatory
;; #  | means optional
;; C  | left_command
;; T  | left_control
;; O  | left_option
;; S  | left_shift
;; F  | fn
;; Q  | right_command
;; W  | right_control
;; E  | right_option
;; R  | right_shift
;; !! | mandatory command + control + optional + shift (hyper)
;; ## | optional any
